<html>
<head>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment 4: Visualization</title>
    <style>
      rect.bordered {
        stroke: #E6E6E6;
        stroke-width:2px;   
      }

      text.mono {
        font-size: 9pt;
        font-family: Consolas, courier;
        fill: #aaa;
      }

      text.axis-workweek {
        fill: #000;
      }

      text.axis-worktime {
        fill: #000;
      }
    </style>
</head>

<body>

    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <div class="page-header center">
                <h1>Part 1: <small>Tweet Length Timemap</small></h1>
            </div>


            <h2></h2>
			<p>
				From the visualization, we can see several phenomenon. First, people post longer tweets more likely in the afternoon, since darker colors cluster at the range from 11am to 11pm. Second, the lighter colors appear at weekend morning, which indicates that people post shorter tweets. The darkest cubes are Wednesdays at 4pm and Thursday at 3pm. The lightest cubes are Sundays at 5am, 9am, 10am. I think things start to happen in the morning and topics accumulate more and more as time goes by and people have more things to talk about in the late of a day. Therefore, tweets are longer in the afternoon. On Saturday and Sunday mornings, most people are probably sleeping, there are not much topics at that time, so tweets are shorter.
			</p>
			<p>
				Here is some tweets posted on Sunday 5am:
				<li>Why are they doggin on shaq</li>
				<li>Black Fire is my creation!</li>
				<li>hash tag slm dunk west</li>
				<li>@Geir_Man They don't have this problem in Guatemala.</li>
				<li>THE DUNK CONTEST IS NOT THE SAME AT ALL.</li>
				<li>@Gabriela_Reid church pew or a bar stool Gaby! That's y! Lol</li>
				<li>"@Maine05: @Michael_Avant season starts now , that's why were ALWAYS in the weight room making a difference now ... We out hea" #GrindTime</li>
				<li>@MrJuiceJones where</li>
				<li>"@BLEVisthename: Is Nick Cannon boring, bored or both????" Both</li>
				<li>They just shot fires at shaq</li>
				<li>2 chains and diddy just wasted off ciroc watching this dunk contest lol. what a life</li>
				<li>OMG JUSTIN PLEASE FUCK ME IN THAT BED http://t.co/sAZvtHeOlh</li>
				<li>Trend Alert: #Ross. More trends at http://t.co/lcaeh6tWOl #trndnl http://t.co/18eZX6voK7</li>
				<li>McLemore did that !!</li>
				<li>They jealous a nigga made it they jealous idk why?!??</li>
				<li>Yea this dunk contest is ass.</li>
				<li>@therewillbtears it don't but see that's bae</li>
				<li>GATORS.</li>
			</p>
			<p>
				Here is some tweets posted at Wednesday 4pm:
				<li>Since I can't get out and about today (medical restrictions) this is about as good of an image to post. :) http://t.co/Ry4fhbTM9D </li>
				<li>One of the only reasons I enjoy school anymore is that I get to see those friends of mine who I don't see out side of school. #friends </li>
				<li>Paws up little monsters.  http://t.co/CRLnLTegAC </li>
				<li>"@LowellPye: @ChellePrather Thank you!" You are so very welcome and deserve every moment of success that comes your way! </li>
				<li>#GDNY Didnt get a chance to see my favorite #nyc #sportscaster @DukeCastiglione but hey #ISnappedThis http://t.co/FAoTCHz3V0 </li>
				<li>@brianlilley @JustinTrudeauMP Wasn't Harper supposed to be the dictator? </li>
				<li>@JKenreich I don't know I know blonde </li>
				<li>I'm so happy I did goood on my math midtermm </li>
				<li>RiFF RAFF merch isn't some middle of the mall merch. It is made with premium tees that are made to last. </li>
				<li>Today's goal: Be who you are and don't allow anyone to affect the confidence you have in your individuality. #staystrong </li>
				<li>@MusicOf_Life She made me mad earlier. </li>
				<li>@NewDay @cnnbrk move to #NorthDakota its like</li>veryday in in the winter! #BunchOfSissies </li>
				<li>#ThisCouldBeUsButYouPlayin http://t.co/jFinzcnsLS </li>
				<li>@SpeakYourMind25 we need to pray to him before class.. hopefully its not like yesterday when she made us start before the bell rang :/ </li>
				<li>No one shits flowers, not even Ms Daisy </li>
				<li>@baileyone23 @NFLonFOX And an icon for many Italian viewers and fans. :-) </li>
				<li>@alroker maybe the Mayor and the Governor have @DIRECTV so they didn't get your forecast about the #weather lets Blame @directv LOL! </li>
				<li>We Made A Bond From The Very Beginning, I Found My Homie And My Bestfriend, Imma Be There For You To The Very End, No Matter What! </li>
				
			</p>


        <div class="col-md-2"></div>
    </div>
    <div id="chart"></div>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript">
      var margin = { top: 50, right: 200, bottom: 100, left: 300 },
          width = 1260 - margin.left - margin.right,
          height = 430 - margin.top - margin.bottom,
          gridSize = Math.floor(width / 24),
          legendElementWidth = gridSize*2,
	      left = 0,
          buckets = 10,
          colors = ["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58","#000000"], // alternatively colorbrewer.YlGnBu[9]
          days = ["Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
          times = ["1a", "2a", "3a", "4a", "5a", "6a", "7a", "8a", "9a", "10a", "11a", "12p", "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p", "10p", "11p", "12a"];

      d3.tsv("out.tsv",
        function(d) {
          return {
            day: +d.day,
            hour: +d.hour,
            value: +d.value
          };
        },
        function(error, data) {
          var colorScale = d3.scale.linear()
              .domain([1,2,3,4,5,6,7,8,9,10])
              .range(colors);
		  

          var svg = d3.select("#chart").append("svg")
              .attr("width", width + margin.left + margin.right)
              .attr("height", height + margin.top + margin.bottom)
              .append("g")
              .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          var dayLabels = svg.selectAll(".dayLabel")
              .data(days)
              .enter().append("text")
                .text(function (d) { return d; })
                .attr("x", 0)
                .attr("y", function (d, i) { return i * gridSize; })
                .style("text-anchor", "end")
			    .attr("transform", "translate(-6," + gridSize / 1.5 + ")")
                .attr("class", function (d, i) { return ((i >= 0 && i <= 4) ? "dayLabel mono axis axis-workweek" : "dayLabel mono axis"); });

          var timeLabels = svg.selectAll(".timeLabel")
              .data(times)
              .enter().append("text")
                .text(function(d) { return d; })
                .attr("x", function(d, i) { return i * gridSize; })
                .attr("y", 0)
                .style("text-anchor", "middle")
                .attr("transform", "translate(" + gridSize / 2 + ", -6)")
                .attr("class", function(d, i) { return ((i >= 7 && i <= 16) ? "timeLabel mono axis axis-worktime" : "timeLabel mono axis"); });

          var heatMap = svg.selectAll(".hour")
              .data(data)
              .enter().append("rect")
              .attr("x", function(d) { return (d.hour - 1) * gridSize; })
              .attr("y", function(d) { return (d.day - 1) * gridSize; })
              .attr("rx", 4)
              .attr("ry", 4)
              .attr("class", "hour bordered")
              .attr("width", gridSize)
              .attr("height", gridSize)
              .style("fill", colors[0]);

          heatMap.transition().duration(1000)
              .style("fill", function(d) { return colorScale(d.value); });

          heatMap.append("title").text(function(d) { return d.value; });
              
          var legend = svg.selectAll(".legend")
              .data([1,2,3,4,5,6,7,8,9,10])
              .enter().append("g")
              .attr("class", "legend");

          legend.append("rect")
            .attr("x", function(d, i) { return legendElementWidth * i; })
            .attr("y", height)
            .attr("width", legendElementWidth)
            .attr("height", gridSize / 2)
            .style("fill", function(d, i) { return colors[i]; });

          legend.append("text")
            .attr("class", "mono")
            .text(function(d) { return d; })
            .attr("x", function(d, i) { return legendElementWidth * (i + 0.5); })
            .attr("y", height + gridSize);
      });
    </script>

</body>
</html>
